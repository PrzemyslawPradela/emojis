<!DOCTYPE html>
<html>
    <head>
        <title>Emotikony</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script src="jquery/jquery-3.4.1.min.js"></script>
        <script src="bootstrap/js/bootstrap.bundle.js"></script>
        <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">
        <link href="fontawesome/css/all.min.css" rel="stylesheet">

        <script>
            $(window).on("load", function () {
                $("#header").load("header.html");
                $.get("IndexServlet", function (responseJson) {
                    $.each(responseJson, function (index, emoji) {
                        $("<tr>").appendTo($("#emojis-table"))
                                .append($("<td>").text(emoji.emojiName))
                                .append($("<td>").text(emoji.description))
                                .append($("<td><img src=\"data:image/jpg;base64," + emoji.base64Icon + "\" width=\"64\" height=\"64\"/></td>"))
                                .append($("<td><div class=\"dropdown\">" +
                                        "<button class=\"btn btn-primary dropdown-toggle\" type=\"button\" id=\"dropdownMenuButton\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">" +
                                        "Opcje" +
                                        "</button>" +
                                        "<div class=\"dropdown-menu\" aria-labelledby=\"dropdownMenuButton\">" +
                                        "<a class=\"dropdown-item\" href='DeleteServlet?id=" + emoji.emojiId + "'><i class=\"fa fa-trash\"></i> Usu≈Ñ</a>" +
                                        "<a class=\"dropdown-item\" href='edit.html?id=" + emoji.emojiId + "'><i class=\"fa fa-edit\"></i> Modyfikuj</a>" +
                                        "<a class=\"dropdown-item\" href='DownloadServlet?id=" + emoji.emojiId + "'><i class=\"fa fa-download\"></i> Pobierz</a>" +
                                        "</div>" +
                                        "</div>"));
                    });
                });
            });
        </script>
    </head>
    <body>
        <div id="header"></div>

        <div class="table-responsive-lg">
            <table class="table">
                <thead class="thead-dark">
                    <tr>
                        <th scope="col" style="width: 25%">Nazwa</th>
                        <th scope="col" style="width: 50%">Opis</th>
                        <th scope="col">Ikona</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody id="emojis-table">
                </tbody>
            </table>
        </div>
    </body>
</html>
